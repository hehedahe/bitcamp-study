<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>연락처 연습</title>
</head>
<body>
<h1>다해의 연락처</h1>
<a href="form.html">새 연락처 추가</a>
<table id=x-contact-tbl border=1>
  <thead>
    <tr>
      <th>이름</th>
      <th>이메일</th>
      <th>연락처</th>
      <th>회사 </th>
    </tr>
  </thead>
  <tbody>
    <tr>

    </tr>
  </tbody>
</table>


<script>
var tbody = document.querySelector("#x-contact-tbl tbody");

fetch("/test/list").then(function(response) {
    return response.json();
  }).then(function(arr) {
    for(var str of arr){
      console.log(str);
      var contact = str.split(",")
      var tr = document.createElement("tr");
      tr.innerHTML = `<td><a href="view.html?email=${contact[1]}">${contact[0]}</a></td>
      <td>${contact[1]}</td>
      <td>${contact[2]}</td>
      <td>${contact[3]}</td>`
      tbody.appendChild(tr);
    };
  });

</script>

</body>
</html>
