<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MyList!</title>
	<style>
		#header {
		  position: relative;
		  background-color: navy;
		  color: white;
		  height: 50px;
		  display: flex;
		  align-items: center;
		  padding: 0px 10px;
		}
		
		#login-btn {
		  position: absolute;
		  right: 10px;
		}
		
		#logout-btn {
		  position: absolute;
		  right: 10px;
		}
		
		#app-title {
		  font-size: 1.3em;
		  font-weight: bold; 
		}
		
		.container {
		  width: 600px;
		  margin: 0px auto;
		}
		
		#user-name {
		  position: absolute;
		  right: 90px;
		}
	</style>

</head>
<body>

<div class="container">
<div id="header">
	<span id="app-title">MyList</span>
	<button id="login-btn" type="button" class="not-login">로그인</button>
	<span id="user-name" class="login"></span>	
	<button id="logout-btn" type="button" class="login">로그아웃</button>
</div>

<h1>MyList에 오신 걸 환영합니다!</h1>
<p>이 프로젝트는 자바 실전 프로그래밍을 경험하기 위해 만든 프로젝트입니다.</p>

<h3>mylist-boot 수업 예제</h3>
<ul>
  <li><a href="contact/index.html">연락처</a></li>
  <li><a href="todo/index.html">해야 할 일</a></li>
  <li><a href="board/index.html">게시글</a></li>
  <li><a href="book/index.html">독서록</a></li>
</ul>

<h3>my1 project</h3>
<ul>
  <li><a href="my1/index.html">메가박스 오리지널 티켓</a></li>
</ul>

</div>



<script type="text/javascript">

css(".login", "display", "none");

fetch("/member/getLoginUser").then(function(response) {
  return response.json(); // resultMap 타입이 JSON 형식으로 변환된 것
}).then(function(result) {
  console.log(result);
  if (result.status == "success") {
    document.querySelector("#user-name").innerHTML = result.data.name;
    
    css(".login", "display", "");
    css(".not-login", "display", "none");
  }
});

function css(selector, name, value) {
  var el = document.querySelectorAll(selector);
  for (var e of el) {
    e.style[name] = value;
  }
  /*
  var el = document.querySelectorAll(".not-login");
  for (var e of el) {
    e.style.display = "none";
  }
  */
}

document.querySelector("#login-btn").onclick = function() {
  location.href = "/member/signin.html"
}

document.querySelector("#logout-btn").onclick = function() {
  fetch("/member/signout").then(function(response) {
    location.href = "/index.html";
  })
}

</script>


</body>
</html>
