<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>변수 활용</title>
</head>
<body>

<h1>배열 다루기 - XMLHttpRequest, JSON.parse</h1>

<button type="button" id="x-btn">배열 가져오기</button> 
<ul id="x-namelist">
</ul>

<script>
var xBtn = document.querySelector("#x-btn");
var xNamelist = document.querySelector("#x-namelist");

xBtn.addEventListener("click", function() {
  // 별도의 요청 작업을 실행한다.
  var xhr = new XMLHttpRequest();

  xhr.onload = function() {
    // 서버에서 받은 JSON 형식의 배열을 자바 스크립트 배열로 변환한다.
    var names = JSON.parse(xhr.responseText);
    for(var name of names) {
    	var li = document.createElement("li"); // <li></li> 태그 생성
    	li.innerHTML = name; // <li>홍길동</li> 각 배열 요소를 <li>태그 안에 삽입
    	xNamelist.appendChild(li); // <ul><li>홍길동</li><ul> <li>태그를 <ul>태그 아래 자식태그로 삽입
    }
  };
  xhr.open("GET", "/lang/variable/exam4/test3", true); // exma4.java에 있는 test3()메소드를 호출!!  

  xhr.send();

});

</script>

</body>
</html>